<!-- Generated by generate_stages.py, do not edit by hand -->
<!-- Run 'make analysis' to regenerate this file -->

# Docker Image Dependency Analysis Report

## Summary

- Total Dockerfiles found: 28
- Images with local dependencies: 20
- Build stages required: 6

## Dependency Tree

```text
✓ alma9 ← almalinux/9-base (external)
✓ alma9-rig ← alma9 ← ghcr.io/cynkra/docker-images/alma9:latest
✓ alma9-rig-rrel ← alma9-rig ← ghcr.io/cynkra/docker-images/alma9-rig:latest
✓ alma9-rig-rrel-coinor ← alma9-rig-rrel ← ghcr.io/cynkra/docker-images/alma9-rig-rrel:latest
✓ build-dust ← rust:latest (external)
✓ dust ← scratch (external)
  └─ COPY --from build-dust ← ghcr.io/cynkra/docker-images/build-dust:latest
✓ r-debug-csan ← r-debug-r-devel ← ghcr.io/cynkra/docker-images/r-debug-r-devel:latest
✓ r-debug-r-devel ← ubuntu:22.04 (external)
✓ r-debug-san ← r-debug-r-devel ← ghcr.io/cynkra/docker-images/r-debug-r-devel:latest
✓ r-debug-strictbarrier ← r-debug-r-devel ← ghcr.io/cynkra/docker-images/r-debug-r-devel:latest
✓ r-debug-threadcheck ← r-debug-r-devel ← ghcr.io/cynkra/docker-images/r-debug-r-devel:latest
✓ r-debug-valgrind ← r-debug-r-devel ← ghcr.io/cynkra/docker-images/r-debug-r-devel:latest
✓ r-minimal ← ubuntu:latest (external)
✓ rig-debian ← debian:bookworm (external)
✓ sops-age ← alpine:latest (external)
✓ sssd-almalinux ← almalinux:9 (external)
✓ ubuntu24 ← ubuntu:24.04 (external)
✓ ubuntu24-rig ← ubuntu24 ← ghcr.io/cynkra/docker-images/ubuntu24:latest
✓ ubuntu24-rig-rdev ← ubuntu24-rig ← ghcr.io/cynkra/docker-images/ubuntu24-rig:latest
✓ ubuntu24-rig-rdev-dc ← ubuntu24-rig-rdev ← ghcr.io/cynkra/docker-images/ubuntu24-rig-rdev:latest
  └─ COPY --from dust ← ghcr.io/cynkra/docker-images/dust:latest
✓ ubuntu24-rig-rdev-dc-dt ← ubuntu24-rig-rdev-dc ← ghcr.io/cynkra/docker-images/ubuntu24-rig-rdev-dc:latest
✓ ubuntu24-rig-rdev-gcc14 ← ubuntu24-rig-rdev ← ghcr.io/cynkra/docker-images/ubuntu24-rig-rdev:latest
✓ ubuntu24-rig-rdev-gcc14-duckdb ← ubuntu24-rig-rdev-gcc14 ← ghcr.io/cynkra/docker-images/ubuntu24-rig-rdev-gcc14:latest
✓ ubuntu24-rig-rrel ← ubuntu24-rig ← ghcr.io/cynkra/docker-images/ubuntu24-rig:latest
✓ ubuntu24-rig-rrel-dc ← ubuntu24-rig-rrel ← ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel:latest
  └─ COPY --from dust ← ghcr.io/cynkra/docker-images/dust:latest
✓ ubuntu24-rig-rrel-dc-dt ← ubuntu24-rig-rrel-dc ← ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc:latest
✓ ubuntu24-rig-rrel-dc-dt-dm ← ubuntu24-rig-rrel-dc-dt ← ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc-dt:latest
✓ ubuntu24-rig-rrel-dc-dt-pkgcache ← ubuntu24-rig-rrel-dc-dt ← ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc-dt:latest
```

## Build Order (Topological Sort)

### Stage 1

- alma9
- build-dust
- r-debug-r-devel
- ubuntu24

### Stage 2

- alma9-rig
- dust
- r-debug-csan
- r-debug-san
- r-debug-strictbarrier
- r-debug-threadcheck
- r-debug-valgrind
- ubuntu24-rig

### Stage 3

- alma9-rig-rrel
- ubuntu24-rig-rdev
- ubuntu24-rig-rrel

### Stage 4

- alma9-rig-rrel-coinor
- ubuntu24-rig-rdev-dc
- ubuntu24-rig-rdev-gcc14
- ubuntu24-rig-rrel-dc

### Stage 5

- ubuntu24-rig-rdev-dc-dt
- ubuntu24-rig-rdev-gcc14-duckdb
- ubuntu24-rig-rrel-dc-dt

### Stage 6

- ubuntu24-rig-rrel-dc-dt-dm
- ubuntu24-rig-rrel-dc-dt-pkgcache


## External Dependencies

### FROM Dependencies

- `almalinux/9-base` used by: alma9
- `almalinux:9` used by: sssd-almalinux
- `alpine:latest` used by: sops-age
- `debian:bookworm` used by: rig-debian
- `rust:latest` used by: build-dust
- `scratch` used by: dust
- `ubuntu:22.04` used by: r-debug-r-devel
- `ubuntu:24.04` used by: ubuntu24
- `ubuntu:latest` used by: r-minimal

## FROM Instruction Validation

This section shows the expected FROM instructions based on directory hierarchy:

- `alma9` (root): FROM `almalinux/9-base` ✓
- `alma9-rig`: FROM `ghcr.io/cynkra/docker-images/alma9:latest` ✓
- `alma9-rig-rrel`: FROM `ghcr.io/cynkra/docker-images/alma9-rig:latest` ✓
- `alma9-rig-rrel-coinor`: FROM `ghcr.io/cynkra/docker-images/alma9-rig-rrel:latest` ✓
- `build-dust` (root): FROM `rust:latest` ✓
- `dust` (root): FROM `scratch` ✓
- `r-debug-csan`: FROM `ghcr.io/cynkra/docker-images/r-debug-r-devel:latest` ❌ (should be `ghcr.io/cynkra/docker-images/r-debug:latest`)
- `r-debug-r-devel`: FROM `ubuntu:22.04` ❌ (should be `ghcr.io/cynkra/docker-images/r-debug:latest`)
- `r-debug-san`: FROM `ghcr.io/cynkra/docker-images/r-debug-r-devel:latest` ❌ (should be `ghcr.io/cynkra/docker-images/r-debug:latest`)
- `r-debug-strictbarrier`: FROM `ghcr.io/cynkra/docker-images/r-debug-r-devel:latest` ❌ (should be `ghcr.io/cynkra/docker-images/r-debug:latest`)
- `r-debug-threadcheck`: FROM `ghcr.io/cynkra/docker-images/r-debug-r-devel:latest` ❌ (should be `ghcr.io/cynkra/docker-images/r-debug:latest`)
- `r-debug-valgrind`: FROM `ghcr.io/cynkra/docker-images/r-debug-r-devel:latest` ❌ (should be `ghcr.io/cynkra/docker-images/r-debug:latest`)
- `r-minimal` (root): FROM `ubuntu:latest` ✓
- `rig-debian` (root): FROM `debian:bookworm` ✓
- `sops-age` (root): FROM `alpine:latest` ✓
- `sssd-almalinux` (root): FROM `almalinux:9` ✓
- `ubuntu24` (root): FROM `ubuntu:24.04` ✓
- `ubuntu24-rig`: FROM `ghcr.io/cynkra/docker-images/ubuntu24:latest` ✓
- `ubuntu24-rig-rdev`: FROM `ghcr.io/cynkra/docker-images/ubuntu24-rig:latest` ✓
- `ubuntu24-rig-rdev-dc`: FROM `ghcr.io/cynkra/docker-images/ubuntu24-rig-rdev:latest` ✓
- `ubuntu24-rig-rdev-dc-dt`: FROM `ghcr.io/cynkra/docker-images/ubuntu24-rig-rdev-dc:latest` ✓
- `ubuntu24-rig-rdev-gcc14`: FROM `ghcr.io/cynkra/docker-images/ubuntu24-rig-rdev:latest` ✓
- `ubuntu24-rig-rdev-gcc14-duckdb`: FROM `ghcr.io/cynkra/docker-images/ubuntu24-rig-rdev-gcc14:latest` ✓
- `ubuntu24-rig-rrel`: FROM `ghcr.io/cynkra/docker-images/ubuntu24-rig:latest` ✓
- `ubuntu24-rig-rrel-dc`: FROM `ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel:latest` ✓
- `ubuntu24-rig-rrel-dc-dt`: FROM `ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc:latest` ✓
- `ubuntu24-rig-rrel-dc-dt-dm`: FROM `ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc-dt:latest` ✓
- `ubuntu24-rig-rrel-dc-dt-pkgcache`: FROM `ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc-dt:latest` ✓

To update FROM instructions automatically, run:
```bash
make check-from   # dry run
make update-from  # apply changes
```
