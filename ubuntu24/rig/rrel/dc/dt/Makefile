# Makefile for Docker image: ubuntu24-rig-rrel-dc-dt
# Generated by generate_stages.py, do not edit by hand
# Run 'make generate-makefiles' to regenerate this file

.PHONY: build build-amd64 build-arm64 pull pull-amd64 pull-arm64 pull-parent-amd64 pull-parent-arm64 run-amd64 run-arm64 run-root-amd64 run-root-arm64 clean-amd64 clean-arm64 help

# Default target
help:
	@echo "Available targets for ubuntu24-rig-rrel-dc-dt:"
	@echo "  build              - Build the Docker image for current platform"
	@echo "  build-amd64        - Build the Docker image for amd64 platform"
	@echo "  build-arm64        - Build the Docker image for arm64 platform"
	@echo "  pull               - Pull the Docker image (manifest) from registry"
	@echo "  pull-amd64         - Pull the amd64 Docker image from registry"
	@echo "  pull-arm64         - Pull the arm64 Docker image from registry"
	@echo "  pull-parent-amd64  - Pull the amd64 parent image this image depends on"
	@echo "  pull-parent-arm64  - Pull the arm64 parent image this image depends on"
	@echo "  run-amd64          - Run interactive bash as regular user (amd64)"
	@echo "  run-arm64          - Run interactive bash as regular user (arm64)"
	@echo "  run-root-amd64     - Run interactive bash as root user (amd64)"
	@echo "  run-root-arm64     - Run interactive bash as root user (arm64)"
	@echo "  clean-amd64        - Remove the amd64 Docker image"
	@echo "  clean-arm64        - Remove the arm64 Docker image"
	@echo "  help               - Show this help message"

# Build the Docker image for current platform
build: build-amd64 build-arm64

# Build the Docker image for amd64 platform
build-amd64:
	@echo "Building Docker image for amd64: ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc-dt:latest-amd64"
	@echo "Creating date file for cache invalidation..."
	@date -Idate > date.txt
	@trap 'rm -f date.txt' EXIT; docker build --platform linux/amd64 --build-arg TARGETARCH=amd64 -t ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc-dt:latest-amd64 .

# Build the Docker image for arm64 platform
build-arm64:
	@echo "Building Docker image for arm64: ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc-dt:latest-arm64"
	@echo "Creating date file for cache invalidation..."
	@date -Idate > date.txt
	@trap 'rm -f date.txt' EXIT; docker build --platform linux/arm64 --build-arg TARGETARCH=arm64 -t ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc-dt:latest-arm64 .

# Pull the Docker image from registry (manifest)
pull:
	@echo "Pulling Docker image: ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc-dt:latest"
	docker pull ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc-dt:latest

# Pull the amd64 Docker image from registry
pull-amd64:
	@echo "Pulling amd64 Docker image: ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc-dt:latest-amd64"
	docker pull ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc-dt:latest-amd64

# Pull the arm64 Docker image from registry
pull-arm64:
	@echo "Pulling arm64 Docker image: ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc-dt:latest-arm64"
	docker pull ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc-dt:latest-arm64

# Pull the parent image this image depends on
pull-parent:
	@echo "Pulling amd64 parent image: ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc:latest"
	docker pull ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc:latest

# Pull the amd64 parent image this image depends on
pull-parent-amd64:
	@echo "Pulling amd64 parent image: ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc:latest"
	docker pull --platform linux/amd64 ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc:latest

# Pull the arm64 parent image this image depends on
pull-parent-arm64:
	@echo "Pulling arm64 parent image: ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc:latest"
	docker pull --platform linux/arm64 ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc:latest

# Run interactive bash as regular user (amd64)
run-amd64:
	@echo "Starting interactive bash session in ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc-dt:latest"
	docker run --platform linux/amd64 --rm -it ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc-dt:latest /bin/bash

# Run interactive bash as regular user (arm64)
run-arm64:
	@echo "Starting interactive bash session in ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc-dt:latest"
	docker run --platform linux/arm64 --rm -it ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc-dt:latest /bin/bash

# Run interactive bash as root user (amd64)
run-root-amd64:
	@echo "Starting interactive bash session as root in ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc-dt:latest"
	docker run --platform linux/amd64 --rm -it --user root ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc-dt:latest /bin/bash

# Run interactive bash as root user (arm64)
run-root-arm64:
	@echo "Starting interactive bash session as root in ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc-dt:latest"
	docker run --platform linux/arm64 --rm -it --user root ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc-dt:latest /bin/bash

# Remove the Docker image (both architectures)
clean: clean-amd64 clean-arm64

# Remove the amd64 Docker image
clean-amd64:
	@echo "Removing amd64 Docker image: ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc-dt:latest-amd64"
	docker rmi ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc-dt:latest-amd64 || true

# Remove the arm64 Docker image
clean-arm64:
	@echo "Removing arm64 Docker image: ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc-dt:latest-arm64"
	docker rmi ghcr.io/cynkra/docker-images/ubuntu24-rig-rrel-dc-dt:latest-arm64 || true
