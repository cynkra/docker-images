# Generated by generate_stages.py, do not edit by hand
# Run 'make stages' to regenerate this file

name: Create and publish a Docker image

on:
  push:
    branches:
      - main
      - dev
      - arm
  workflow_dispatch: null
  schedule:
    - cron: 0 0 * * *

env:
  REGISTRY: ghcr.io
  REPO_NAME: ${{ github.repository }}

jobs:
  alma9:
    uses: cynkra/docker-images/.github/workflows/publish.yml@arm
    with:
      path: alma9
      image_name: alma9
      architectures: '["amd64", "arm64"]'
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}

  rig-alma9:
    needs:
      - alma9
    uses: cynkra/docker-images/.github/workflows/publish.yml@arm
    with:
      path: alma9/rig
      image_name: alma9-rig
      architectures: '["amd64", "arm64"]'
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}

  rrel-rig-alma9:
    needs:
      - rig-alma9
    uses: cynkra/docker-images/.github/workflows/publish.yml@arm
    with:
      path: alma9/rig/rrel
      image_name: alma9-rig-rrel
      architectures: '["amd64", "arm64"]'
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}

  coinor-rrel-rig-alma9:
    needs:
      - rrel-rig-alma9
    uses: cynkra/docker-images/.github/workflows/publish.yml@arm
    with:
      path: alma9/rig/rrel/coinor
      image_name: alma9-rig-rrel-coinor
      architectures: '["amd64", "arm64"]'
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}

  build-dust:
    uses: cynkra/docker-images/.github/workflows/publish.yml@arm
    with:
      path: build-dust
      image_name: build-dust
      architectures: '["amd64", "arm64"]'
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}

  dust:
    needs:
      - build-dust
    uses: cynkra/docker-images/.github/workflows/publish.yml@arm
    with:
      path: dust
      image_name: dust
      architectures: '["amd64", "arm64"]'
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}

  csan-r-debug:
    needs:
      - r-devel-r-debug
    uses: cynkra/docker-images/.github/workflows/publish.yml@arm
    with:
      path: r-debug/csan
      image_name: r-debug-csan
      architectures: '["amd64", "arm64"]'
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}

  r-devel-r-debug:
    uses: cynkra/docker-images/.github/workflows/publish.yml@arm
    with:
      path: r-debug/r-devel
      image_name: r-debug-r-devel
      architectures: '["amd64", "arm64"]'
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}

  san-r-debug:
    needs:
      - r-devel-r-debug
    uses: cynkra/docker-images/.github/workflows/publish.yml@arm
    with:
      path: r-debug/san
      image_name: r-debug-san
      architectures: '["amd64", "arm64"]'
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}

  strictbarrier-r-debug:
    needs:
      - r-devel-r-debug
    uses: cynkra/docker-images/.github/workflows/publish.yml@arm
    with:
      path: r-debug/strictbarrier
      image_name: r-debug-strictbarrier
      architectures: '["amd64", "arm64"]'
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}

  threadcheck-r-debug:
    needs:
      - r-devel-r-debug
    uses: cynkra/docker-images/.github/workflows/publish.yml@arm
    with:
      path: r-debug/threadcheck
      image_name: r-debug-threadcheck
      architectures: '["amd64", "arm64"]'
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}

  valgrind-r-debug:
    needs:
      - r-devel-r-debug
    uses: cynkra/docker-images/.github/workflows/publish.yml@arm
    with:
      path: r-debug/valgrind
      image_name: r-debug-valgrind
      architectures: '["amd64", "arm64"]'
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}

  r-minimal:
    uses: cynkra/docker-images/.github/workflows/publish.yml@arm
    with:
      path: r-minimal
      image_name: r-minimal
      architectures: '["amd64", "arm64"]'
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}

  rig-debian:
    uses: cynkra/docker-images/.github/workflows/publish.yml@arm
    with:
      path: rig-debian
      image_name: rig-debian
      architectures: '["amd64"]'
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}

  sops-age:
    uses: cynkra/docker-images/.github/workflows/publish.yml@arm
    with:
      path: sops-age
      image_name: sops-age
      architectures: '["amd64", "arm64"]'
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}

  sssd-almalinux:
    uses: cynkra/docker-images/.github/workflows/publish.yml@arm
    with:
      path: sssd-almalinux
      image_name: sssd-almalinux
      architectures: '["amd64", "arm64"]'
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}

  ubuntu24:
    uses: cynkra/docker-images/.github/workflows/publish.yml@arm
    with:
      path: ubuntu24
      image_name: ubuntu24
      architectures: '["amd64", "arm64"]'
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}

  rig-ubuntu24:
    needs:
      - ubuntu24
    uses: cynkra/docker-images/.github/workflows/publish.yml@arm
    with:
      path: ubuntu24/rig
      image_name: ubuntu24-rig
      architectures: '["amd64", "arm64"]'
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}

  rdev-rig-ubuntu24:
    needs:
      - rig-ubuntu24
    uses: cynkra/docker-images/.github/workflows/publish.yml@arm
    with:
      path: ubuntu24/rig/rdev
      image_name: ubuntu24-rig-rdev
      architectures: '["amd64", "arm64"]'
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}

  dc-rdev-rig-ubuntu24:
    needs:
      - dust
      - rdev-rig-ubuntu24
    uses: cynkra/docker-images/.github/workflows/publish.yml@arm
    with:
      path: ubuntu24/rig/rdev/dc
      image_name: ubuntu24-rig-rdev-dc
      architectures: '["amd64", "arm64"]'
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}

  dt-dc-rdev-rig-ubuntu24:
    needs:
      - dc-rdev-rig-ubuntu24
    uses: cynkra/docker-images/.github/workflows/publish.yml@arm
    with:
      path: ubuntu24/rig/rdev/dc/dt
      image_name: ubuntu24-rig-rdev-dc-dt
      architectures: '["amd64", "arm64"]'
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}

  gcc14-rdev-rig-ubuntu24:
    needs:
      - rdev-rig-ubuntu24
    uses: cynkra/docker-images/.github/workflows/publish.yml@arm
    with:
      path: ubuntu24/rig/rdev/gcc14
      image_name: ubuntu24-rig-rdev-gcc14
      architectures: '["amd64", "arm64"]'
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}

  duckdb-gcc14-rdev-rig-ubuntu24:
    needs:
      - gcc14-rdev-rig-ubuntu24
    uses: cynkra/docker-images/.github/workflows/publish.yml@arm
    with:
      path: ubuntu24/rig/rdev/gcc14/duckdb
      image_name: ubuntu24-rig-rdev-gcc14-duckdb
      architectures: '["amd64", "arm64"]'
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}

  rrel-rig-ubuntu24:
    needs:
      - rig-ubuntu24
    uses: cynkra/docker-images/.github/workflows/publish.yml@arm
    with:
      path: ubuntu24/rig/rrel
      image_name: ubuntu24-rig-rrel
      architectures: '["amd64", "arm64"]'
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}

  dc-rrel-rig-ubuntu24:
    needs:
      - dust
      - rrel-rig-ubuntu24
    uses: cynkra/docker-images/.github/workflows/publish.yml@arm
    with:
      path: ubuntu24/rig/rrel/dc
      image_name: ubuntu24-rig-rrel-dc
      architectures: '["amd64", "arm64"]'
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}

  dt-dc-rrel-rig-ubuntu24:
    needs:
      - dc-rrel-rig-ubuntu24
    uses: cynkra/docker-images/.github/workflows/publish.yml@arm
    with:
      path: ubuntu24/rig/rrel/dc/dt
      image_name: ubuntu24-rig-rrel-dc-dt
      architectures: '["amd64", "arm64"]'
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}

  dm-dt-dc-rrel-rig-ubuntu24:
    needs:
      - dt-dc-rrel-rig-ubuntu24
    uses: cynkra/docker-images/.github/workflows/publish.yml@arm
    with:
      path: ubuntu24/rig/rrel/dc/dt/dm
      image_name: ubuntu24-rig-rrel-dc-dt-dm
      architectures: '["amd64", "arm64"]'
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}

  pkgcache-dt-dc-rrel-rig-ubuntu24:
    needs:
      - dt-dc-rrel-rig-ubuntu24
    uses: cynkra/docker-images/.github/workflows/publish.yml@arm
    with:
      path: ubuntu24/rig/rrel/dc/dt/pkgcache
      image_name: ubuntu24-rig-rrel-dc-dt-pkgcache
      architectures: '["amd64", "arm64"]'
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}
